(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const s=document.getElementById("recordBtn"),c=document.getElementById("transcript");let o,d=[];s.addEventListener("click",async()=>{if(!o||o.state==="inactive"){const l=await navigator.mediaDevices.getUserMedia({audio:!0});o=new MediaRecorder(l),d=[],o.ondataavailable=r=>{d.push(r.data)},o.onstop=async()=>{const r=new Blob(d,{type:"audio/wav"}),a=new FormData;a.append("audio",r,"recording.wav"),c.textContent="⏳ Transcribiendo...";try{const e=await(await fetch("https://1f7b-179-51-111-220.ngrok-free.app/transcribe",{method:"POST",body:a})).json();c.textContent=e.text||"[Sin transcripción]"}catch(n){c.textContent="❌ Error al enviar el audio.",console.error(n)}},o.start(),s.textContent="Detener"}else o.stop(),s.textContent="Grabar"});
